{"version":3,"sources":["HomePage.js","api.js","Login.js","create-fetcher.js","AddFood.js","FoodManage.js","OrderManage.js","DeskManage.js","history.js","boss-manage.js","LandingPage.js","FoodCart.js","OrderSuccess.js","Register.js","App.js","serviceWorker.js","index.js"],"names":["HomePage","to","api","axios","create","baseURL","withCredentials","HorizontalLoginForm","handleSubmit","e","preventDefault","props","form","validateFields","err","values","a","post","then","res","console","log","data","code","alert","history","push","id","this","fieldsError","getFieldDecorator","getFieldsError","getFieldError","isFieldTouched","usernameError","passwordError","layout","onSubmit","Item","validateStatus","help","rules","required","message","prefix","type","style","color","placeholder","htmlType","disabled","Object","keys","some","field","React","Component","WrappedHorizontalLoginForm","Form","name","f","cache","clearCache","read","args","key","join","val","CollectionCreateForm","visible","onCancel","onCreate","title","okText","onOk","label","ref","passref","AddFood","imgRef","createRef","state","showModal","setState","handleCancel","handleCreate","formRef","fd","FormData","append","current","input","files","resetFields","renderAgain","saveFormRef","onClick","wrappedComponentRef","Meta","Card","size","Radio","FoodItem","useState","food","foodInfo","setFoodInfo","isModify","setModify","desc","price","category","img","status","foodprops","setprops","change","target","value","width","margin","defaultValue","onChange","put","rid","foodinfo","cover","alt","src","actions","onDelete","FoodManagae","foods","setfoods","match","params","delete","get","useEffect","map","OrderItem","order","deskName","totalPrice","customCount","OrderManage","orders","socket","io","on","emit","length","DeskItem","did","desk","capacity","deleteDesk","AddDesk","handleOk","persist","newDesk","window","location","reload","withRouter","setDesk","setName","setNum","fetcher","createfetcher","fallback","desks","changeNum","changeName","createHashHistory","titleStyle","height","fontSize","userinfoFetcher","createFetcher","catch","Bossinfo","info","fontFamily","listStyle","marginTop","path","component","Option","Select","ButtonStyle","count","setCount","showSearch","optionFilterProp","filterOption","option","children","toLowerCase","indexOf","ButtonGroup","Button","Group","imgStyle","float","borderRadius","detailStyle","border","position","bottom","left","right","backgroundColor","cartStyle","MenuItem","onUpdate","amount","dec","calcTotalPrice","cartAry","reduce","total","item","CartDetails","CartStatus","expend","setExpend","OnplaceOrder","FoodCart","cartChange","placeOrder","cart","deskInfo","pathname","changeCount","idx","findIndex","it","slice","foodMenu","loading","close","currentAmount","currentCartItem","find","cartItem","OrderSuccess","background","padding","bordered","Register","App","exact","LandingPage","Manage","Login","Boolean","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.3bec9094.chunk.js","sourcesContent":["import React from \"react\"\r\nimport {Link} from \"react-router-dom\"\r\n\r\nfunction HomePage() {\r\n  return(\r\n    <div>\r\n      <Link to=\"/login\">登录</Link>\r\n      <Link to=\"/register\">注册</Link>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default HomePage","import axios from \"axios\"\nconst api = axios.create({\n    baseURL:\"/api\",\n    withCredentials:true,\n})\n\n\nexport default api","import React from \"react\"\r\nimport api from \"./api\";\r\nimport { Form, Icon, Input, Button } from 'antd';\r\n\r\nfunction hasErrors(fieldsError) {\r\n  return Object.keys(fieldsError).some(field => fieldsError[field]);\r\n}\r\n\r\nclass HorizontalLoginForm extends React.Component {\r\n  componentDidMount() {\r\n    // To disabled submit button at the beginning.\r\n    this.props.form.validateFields();\r\n  }\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n \r\n    this.props.form.validateFields(async (err, values) => {\r\n      if (!err) {\r\n      \r\n        await api.post(\"/login\",{\r\n          \r\n          values:values\r\n        }).then((res)=>{ \r\n          console.log(\"res\",res.data)\r\n          if(res.data.code === -1){\r\n            console.log(\"code\",res.code)\r\n            alert(\"用户名或密码错误\")\r\n          }else{\r\n            this.props.history.push(`/restaurant/${res.data.id}/manage/`) \r\n          }\r\n          })\r\n      // 登录成功后跳转到manage组件\r\n    \r\n      //this.props.history.push(\"./manage\")\r\n        \r\n      } else{\r\n        alert(\"ss\")\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  render() {\r\n    const { getFieldDecorator, getFieldsError, getFieldError, isFieldTouched } = this.props.form;\r\n\r\n    // Only show error after a field is touched.\r\n    const usernameError = isFieldTouched('username') && getFieldError('username');\r\n    const passwordError = isFieldTouched('password') && getFieldError('password');\r\n    return (\r\n      <Form layout=\"inline\" onSubmit={this.handleSubmit}>\r\n        <Form.Item validateStatus={usernameError ? 'error' : ''} help={usernameError || ''}>\r\n          {getFieldDecorator('username', {\r\n            rules: [{ required: true, message: 'Please input your username!' }],\r\n          })(\r\n            <Input\r\n              prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n              placeholder=\"Username\"\r\n            />,\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item validateStatus={passwordError ? 'error' : ''} help={passwordError || ''}>\r\n          {getFieldDecorator('password', {\r\n            rules: [{ required: true, message: 'Please input your Password!' }],\r\n          })(\r\n            <Input\r\n              prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n            />,\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item>\r\n          <Button type=\"primary\" htmlType=\"submit\" disabled={hasErrors(getFieldsError())}>\r\n            Log in\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    );\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\r\nconst WrappedHorizontalLoginForm = Form.create({ name: 'horizontal_login' })(HorizontalLoginForm);\r\n  export default WrappedHorizontalLoginForm\r\n","export default function (f) {\n   var cache = {}\n\n   return {\n     clearCache() {\n        cache = {}\n     },\n     read(...args) {\n         var key = args.join('|')\n         if(key in cache) {\n             return cache[key]\n         } else {\n             throw f(...args).then((val) => {\n                 cache[key] = val\n             }\n             )\n         }\n     }\n   }\n}\n","import React from \"react\"\nimport { Button, Modal, Form, Input } from 'antd';\nimport api from \"./api\"\n\nconst CollectionCreateForm = Form.create({ name: 'form_in_modal' })(\n  // eslint-disable-next-line\n  class extends React.Component {\n\n    render() {\n      const { visible, onCancel, onCreate, form } = this.props;\n      const { getFieldDecorator } = form;\n      return (\n        <Modal\n          visible={visible}\n          title=\"请添加菜品\"\n          okText=\"Create\"\n          onCancel={onCancel}\n          onOk={onCreate}\n        >\n          <Form layout=\"vertical\">\n            <Form.Item label=\"菜品名称\">\n              {getFieldDecorator('name', {\n                rules: [{ required: true, message: 'Please input the title of collection!' }],\n              })(<Input />)}\n            </Form.Item>\n            <Form.Item label=\"菜品描述\">\n              {getFieldDecorator(\"dec\")(<Input type=\"textarea\" />)}\n            </Form.Item>\n            <Form.Item label=\"菜品价格\">\n              {getFieldDecorator('price')(<Input type=\"textarea\" />)}\n            </Form.Item>\n            <Form.Item label=\"菜品分类\">\n              {getFieldDecorator('category')(<Input type=\"textarea\" />)}\n            </Form.Item>\n            <Form.Item label=\"菜品状态\">\n              {getFieldDecorator(\"status\")(<Input type=\"textarea\" />)}\n            </Form.Item>\n            <Form.Item label=\"菜品图片\">\n              {getFieldDecorator(\"img\")(<Input type=\"file\" ref={this.props.passref}/>)}\n            </Form.Item>     \n           \n          </Form>\n        </Modal>\n      );\n    }\n  },\n);\n\nclass AddFood extends React.Component {\n  imgRef = React.createRef()\n  \n  state = {\n    visible: false,\n  }\n\n  showModal = () => {\n    this.setState({ visible: true });\n  };\n  \n\n  handleCancel = () => {\n    this.setState({ visible: false });\n  };\n  \n  handleCreate = () => {\n\n    const { form } = this.formRef.props;\n    form.validateFields((err, values) => {\n      if (err) {\n        return;\n      }\n    \n\n      console.log('Received values of form: ', values);\n      \n      var fd = new FormData()\n     \n      for(var key in values) {\n        var val = values[key]\n        \n       \n        fd.append(key,val)\n      } \n      fd.append(\"img\",this.imgRef.current.input.files[0])\n      console.log(\"img\",this.imgRef.current.input.files[0])\n     \n      console.log(\"fd\",fd)\n      api.post(\"/restaurant/1/food\",fd)\n      form.resetFields();\n      this.setState({ visible: false });\n\n    });\n  \n    this.props.renderAgain()\n  };\n\n  saveFormRef = formRef => {\n    this.formRef = formRef;\n  };\n\n  render() {\n    return (\n      <div>\n        <Button type=\"primary\" onClick={this.showModal} >\n          添加菜品\n        </Button>\n        <CollectionCreateForm\n          wrappedComponentRef={this.saveFormRef}\n          visible={this.state.visible}\n          onCancel={this.handleCancel}\n          onCreate={this.handleCreate}\n          renderAgain = { this.props.renderAgain }\n          passref = {this.imgRef}\n        />\n      </div>\n    );\n  }\n}\n\n\n\nexport default AddFood","import React, { useState, useEffect } from \"react\"\nimport api from \"./api\"\nimport { Card, Icon ,Button, Radio} from 'antd'\nimport  AddFood from \"./AddFood.js\"\nconst { Meta } = Card\nconst {size} = Radio\n\nfunction FoodItem (props) {\n var [foodInfo,setFoodInfo] = useState(props.food)\n var [isModify,setModify] = useState(false)\n var [foodprops,setprops] = useState({\n     name:props.food.name,\n     desc:props.food.desc,\n     price:props.food.price,\n     category:props.food.category,\n     img:null,\n     status:\"on\"\n })\n\n function change (e) {\n  setprops({\n         ...foodprops,\n         [e.target.name]:e.target.value\n     }\n     )\n }\n\n function getImg (e) {\n \n  setprops({\n    ...foodprops,\n    img: e.target.files[0]\n }\n)\n }\nfunction setOffline () {\n  api.put(\"/restaurant/:rid/food/\"+foodInfo.id,{\n    ...foodprops,\n    status:\"off\",\n  }).then((res => {\n    setFoodInfo(res.data)\n    \n  }))\n}\nfunction setOnline () {\n  api.put(\"/restaurant/:rid/food/\"+foodInfo.id,{\n    ...foodprops,\n    status:\"on\",\n  }).then((res => {\n    setFoodInfo(res.data)\n    \n  }))\n}\n \n\n function save (e) {\n    e.preventDefault()\n\n    var fd = new FormData()\n    for(var key in foodprops) {\n      var val = foodprops[key]\n      console.log(key,val)\n      fd.append(key,val)\n    }\n\n     api.put(`/restaurant/${props.food.rid}/food/` + foodInfo.id,fd).then((foodinfo) => {\n        setModify(false)\n        setFoodInfo(foodinfo.data)\n        \n     })\n     \n }\n    return (       \n         <div>\n          {!isModify?\n          <Card\n            style={{ width: 300 ,margin:20}}\n            cover={\n              <img\n                alt={ foodInfo.name }\n                src={ \"../upload/\"+foodInfo.img }\n              />\n            } \n                  \n            actions={[\n              foodInfo.status === 'on' ? \n              \n              <button onClick = { setOffline }>\n                <Icon type=\"setting\" key=\"setting\"/>\n                下架\n              </button>\n              :\n              <button onClick = { setOnline }>\n                <Icon type=\"setting\" key=\"setting\"/>\n                上架\n              </button>\n              ,\n              <button onClick={ ()=> {setModify(true)}}>\n                 <Icon type=\"edit\" key=\"edit\" />\n                 修改\n              </button>,\n              <button onClick = { () => { props.onDelete( foodInfo.id)} }>\n                 <Icon type=\"delete\" key=\"delete\" />\n                 删除\n              </button>\n              \n            ]}\n          >\n            <Meta   \n              title={ foodInfo.name }\n            />\n\n            <ul>\n            <li>\n             描述:{ foodInfo.desc }\n            </li>\n            <li>\n             价格:{ foodInfo.price }\n            </li>\n            <li>\n             分类:{ foodInfo.category }\n            </li>\n            </ul>\n          </Card> :\n          <div>\n              <form style={{ width:300,margin:20}}>\n                  菜名：<input \n                  style={{ width:300}} type=\"text\" defaultValue={foodInfo.name} \n                  onChange={change} name=\"name\"/><br/>\n                  描述：<input \n                  style={{ width:300}} type=\"text\" defaultValue={foodInfo.desc} \n                  onChange={change}\n                  name=\"desc\"/><br/>\n                  价格：<input \n                  style={{ width:300}} type=\"text\" defaultValue={foodInfo.price} \n                  onChange={change} name=\"price\"/><br/>\n                  分类：<input \n                  style={{ width:300}} type=\"text\" defaultValue={foodInfo.category} \n                  onChange={change} name=\"category\"/><br/>\n                  图片：<input type=\"file\" onChange = { getImg }\n                   name=\"img\"/><br/>\n                  <Button type=\"primary\"  size={size} onClick={ save }>完成并保存</Button>\n              </form>\n          </div>\n          }\n        </div>\n    )\n}\n\n\n\nfunction FoodManagae (props) {\n   var [foods,setfoods] = useState([])\n   var rid = props.match.params.rid\n\n   useEffect(() => {\n       api.get(`/restaurant/${rid}/food`).then(res => {\n        setfoods(res.data)\n       })\n\n   },[])\n\n   function renderAgain () {\n      api.get(`/restaurant/${rid}/food`).then(res => {\n      setfoods(res.data)\n     })\n   }\n   \n  function onDelete (id) {\n    api.delete(`/restaurant/${rid}/food`+id).then(() => {\n      api.get(`/restaurant/${rid}/food`).then(res => {\n        setfoods(res.data)\n       })\n    })\n  }\n  \n  \n   \n   return (\n       <div>\n           <div>\n               {\n                 foods.map(food => {\n                    return <FoodItem food={food} key={food.id} onDelete ={ onDelete } \n                    ></FoodItem>\n                 })\n               }\n           </div>\n           <AddFood foods={ foods } renderAgain={ renderAgain }/>\n       </div>\n   )\n}\n\nexport default FoodManagae","import React, { Component} from \"react\"\nimport io from \"socket.io-client\"\nimport api from \"./api\"\nimport { Card } from 'antd';\n\n\nfunction OrderItem(props) {\n\n  \n \n  return(\n      <div style={{margin:\"15px\"}}>\n       <Card size=\"small\" title={props.order.deskName} style={{ width: 300 }}>\n        <p>总价格：{ props.order.totalPrice }</p>\n        <p>用餐人数：{ props.order.customCount }</p>\n        \n    </Card>\n      </div>\n  )\n}\n\nclass OrderManage extends Component{\n    constructor() {\n      super()\n      this.state={\n          orders:[]\n      }\n    }\n componentDidMount() {\n     var params = this.props.match.params\n    this.socket = io()\n\n    this.socket.on(\"connect\",() => {\n        console.log(\"params\",params.rid)\n        this.socket.emit(\"join restaurant\",\"restaurant:\" + params.rid)\n    })\n    this.socket.on(\"new order\",order => {\n        this.setState(state => ({\n            orders: [order,...state.orders]\n        }))\n    })\n\n    \n \n\n    api.get(`/restaurant/${params.rid}/order`).then((res) => {\n        this.setState({\n            orders:res.data\n        })\n    })\n }\n//  componentWillUnmount() {\n//     this.socket.close()\n// }\n\n\n\n  render() {\n    return(\n        <div>\n            <h3>订单管理</h3>\n            <div>\n            {this.state.orders.length > 0 ?\n                this.state.orders.map(order=> {\n                    return <OrderItem order={order} key={order.id}/>\n                }):\n                <div>loading...</div>\n            }\n            </div>\n        </div>\n    )\n  }\n\n}\n\n\n\n\n\n   \n\n\n\nexport default OrderManage","import React, { Suspense, useState } from 'react';\nimport {withRouter} from \"react-router-dom\";\nimport api from \"./api\";\nimport createfetcher from \"./create-fetcher\";\nimport { Card,Modal, Button} from 'antd';\n\nfunction DeskItem(props) {\n\n\t\n\tvar did = props.desk.id\n\n\treturn (\n\t\t<div>\n\t\t\t<Card style={{ width: 300 }}>\n\t\t\t\t<p>桌名：{ props.desk.name}</p>\n\t\t\t\t<p>容纳人数：{ props.desk.capacity }</p>\n\t\t\t\t<Button size=\"small\" \n\t\t\t\tonClick={ ()=> props.deleteDesk(did) }>删除</Button>\n     </Card>\n\t\t</div>\n\t)\n}\n// 增加桌子\nclass AddDesk extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state={\n\t\t\tvisible: false,\n\t\t\tdeskName:\"\",\n\t\t\tcapacity:\"\",\n\t\t}\n\t}\n\n  \n\tshowModal = () => {\n\t  this.setState({\n\t\tvisible: true,\n\t  });\n\t};\n  \n\thandleOk = e => {\n\t\t\n\t\te.persist()\n\t\n\t  this.setState({\n\t\tvisible: false,\n\t\t})\n\t\tvar newDesk = {\n\t\t\tname:this.state.deskName,\n\t\t\tcapacity:this.state.capacity,\n\t\t}\n\t\t\n\t\t\tapi.post (`/restaurant/1/desk/`,newDesk).then(() =>{\n        window.location.reload()\n\t\t\t})\n\t\t\n\t\t\n\t};\n  \n\thandleCancel = e => {\n\t\n\t  this.setState({\n\t\tvisible: false,\n\t\t})\n\t\t\n\t};\n\t\n  \n\trender() {\n\t  return (\n\t\t<div>\n\t\t  <Button type=\"primary\" onClick={this.showModal}>\n\t\t\t增加桌子\n\t\t  </Button>\n\t\t  <Modal\n\t\t\ttitle=\"增加桌子\"\n\t\t\tvisible={this.state.visible}\n\t\t\tonOk={this.handleOk}\n\t\t\tonCancel={this.handleCancel}\n\t\t\n\t\t  >\n\t\t\n\t\t\t\t桌子名称：<input type=\"text\" value={this.state.deskName} onChange={ (e)=>{ this.setState({deskName:e.target.value}) }} \n\t\t\t/><br/><br/>\n\t\t\t\t容纳人数：<input type=\"text\" value={this.state.capacity} onChange={ (e)=>{ this.setState({capacity:e.target.value}) } }\n\t\t\t\t/>\n\t\t\n\t\t  </Modal>\n\t\t</div>\n\t  );\n\t}\n}\n  \n\n\nfunction DeskManage (props){\n\t\tvar [desks,setDesk] = useState({})\n\t\tvar [name,setName] = useState()\n\t\tvar [num,setNum] = useState()\n\t\tvar rid = props.match.params.rid\n    \n\t\tvar fetcher = createfetcher((rid)=>{\n\t\t\treturn api.get(`/restaurant/${rid}/desk`)\n\t\t})\n\t\t// var newDesk = {\n\t\t// \tname:name,\n\t\t// \tcapacity:num,\n\t\t// }\n\t// useEffect(()=> {\n\t// \tawai api.get(`/restaurant/${rid}/desk`).then(res => {\n\t// \t\tsetDesk(res.data)\n\t// \t})\n\t// },[newDesk])\n\t// async ()=>{\n\t// \tawait api.get(`/restaurant/${rid}/desk`).then(res => {\n\t// \t\tsetDesk(res.data)\n\t// \t})\n\t// }\n\n\t\t// useEffect(() =>{\n\t\t// \tapi.post (`/restaurant/${rid}/desk/`,newDesk).then(()=>{\n\t\t// \t\tapi.get(`/restaurant/${rid}/desk`).then(res => {\n\t\t// \t\t\tsetDesk(res.data)\n\t\t// \t\t})\n\t\t// \t})\n\t\t\n\t\t// },[newDesk])\n\n\n\n\tfunction deleteDesk(did) {\n\t\t\tapi.delete(`/restaurant/${rid}/desk/${did}`).then(()=> {\n\t\t\t\tapi.get(`/restaurant/${rid}/desk/`).then((res)=>{\n\t\t\t\t\tsetDesk(res.data)\n\t\t\t\t})\n\t\t\t})\n\t\t\n\t\t}\n\n\n  function DeskInfo({rid}) {\n\t\tvar desks = fetcher.read(rid).data\n\t\tconsole.log(\"desks\",desks)\n\t\t\t return (\n\t\t\t\t<div>\n\t\t\t\t\t{\n\t\t\t\t\tdesks.map( desk => {\n\t\t\t\t\t\treturn <DeskItem key={ desk.id } \n\t\t\t\t\t\tdeleteDesk={deleteDesk} desk={desk}\n\t\t\t\t\t\t/>\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t )\n\t }\n\t\n\t\n\t\n\t function changeNum(e) {\n\t\t setNum(e.target.value)\n\t }\n\t function changeName(e) {\n\t  setName(e.target.value)\n\t }\n \n\n\n   return (\n\t\t<div>\n\t\t\t<Suspense fallback={<div>loading...</div>}>\n\t\t\t  <DeskInfo rid={rid} />\n\t\t\t\t</Suspense>\n\t\t\t\t<AddDesk  changeNum={ changeNum } changeName={ changeName }/>\n\t\t\t\n\t\t\n\t\t<div>\n\t\t\t\n\t\t</div>\n\t\t</div>\n  )\n\t }\n\n\n\n\nexport default withRouter(DeskManage)","// 这个文件是产生一个基于当前路径的hash\nimport { createHashHistory } from 'history'\n\nconst history = createHashHistory()\n\nexport default history\n","\nimport React ,{Suspense}from \"react\";\nimport {\n\n  withRouter,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\nimport api from \"./api\";\nimport { Button } from 'antd';\nimport createFetcher from \"./create-fetcher\"\nimport FoodManagae from \"./FoodManage\";\nimport OrderManage from \"./OrderManage\";\nimport DeskManage from \"./DeskManage\";\nimport history from './history'\n \nconst titleStyle = {\n  height:\"30px\",\n  // borderRadius: \"5px\",\n  // border:\"1px solid\",\n  color:\"rgb(126,183,247)\",\n  fontSize:\"16px\",\n  // textAlign:\"center\",\n  \n}\nvar userinfoFetcher = createFetcher(async function () {\n  return await api.get(\"/userinfo\").catch(()=>{\n    history.push('/login')\n  })\n  \n})\n\n  function Bossinfo () {\n  // 配合suapense获取同步获取餐厅信息\n  var info = userinfoFetcher.read().data\n  console.log(\"info\",info)\n  return  (\n    <div style={ titleStyle }>\n    欢迎 <span style={{fontFamily:\"'Comic Sans MS', cursive, sans-serif\",\n  color:\"rgb(235,240,22)\",\n  }}>{ info.title } </span>餐厅管理者登陆\n  </div>\n  )\n}\n\n\n\n\nexport default withRouter(function (props) {\n\n async function logout () {\n    await api.get(\"/logout\")\n    userinfoFetcher.clearCache()\n    props.history.push(\"/\")\n }\n \n  return (\n    \n      <div>\n        <Suspense fallback={<div>loading...</div>}>\n          <Bossinfo>  \n          </Bossinfo>\n        </Suspense>\n      \n        <nav>\n\n          <ul style={{listStyle:\"none\"}}>\n            <li>\n              <Link to=\"order\">订单管理</Link>\n            </li>\n            <li>\n              <Link to=\"food\">菜品管理</Link>\n            </li>\n            <li>\n              <Link to=\"desk\">桌面管理</Link>\n            </li>\n            \n              <Button  type=\"primary\" \n              onClick={ logout } size=\"small\"\n              style={{marginTop:\"20px\"}}\n              >退出</Button>\n          \n          </ul>\n        </nav>\n       \n        {/* A <Switch> looks through its children <Route>s and\n            renders the first one that matches the current URL. */}\n        <Switch>\n          <Route path=\"/restaurant/:rid/manage/order\" component={OrderManage}>\n        \n          </Route>\n          <Route path=\"/restaurant/:rid/manage/food/\" component={FoodManagae}>\n          </Route>\n          <Route path=\"/restaurant/:rid/manage/desk\">\n            <DeskManage />\n       \n          </Route>\n        </Switch>\n      </div>\n  );\n}\n)\n\n\n// export default withRouter(Manage)\n\n// function Users() {\n//   return <h2>Users</h2>;\n// }\n\n","import React, { Suspense, useState} from 'react'\nimport { Button} from 'antd';\nimport { withRouter } from 'react-router-dom'\nimport { Select } from 'antd'\nimport createFetcher from \"./create-fetcher\"\nimport api from \"./api\"\n\nconst { Option } = Select;\nconst ButtonStyle = {\n    margin:80\n}\nfunction LandingPage ( props ) {\n  var [count,setCount] = useState(0)\n\n  var fetcher = createFetcher((did) => {\n      return api.get('/deskinfo?did=' + did)\n  })\n   \n   \n  function DeskInfo ({did}) {\n      var info = fetcher.read(did).data\n      console.log(\"info\",info)\n\n      return (\n          <div>\n              <h3>{info.title}</h3>\n              <h3>{info.name}</h3>\n          </div>\n      )\n  }\n    \n    var rid = props.match.params.rid\n    var did = props.match.params.did\nconsole.log(rid,did)\n   function onChange(value) {\n      setCount(value)\n      \n    }\n   function orderFood () {\n    props.history.push(`/r/${rid}/d/${did}/c/${count}/`)\n  }\n    \n\n    return (\n    <div>\n     <Suspense fallback={<div>loading</div>}>\n       <DeskInfo did={ did }/>\n      </Suspense>\n      <Select \n        showSearch\n        style={{ width: 200 }}\n        placeholder=\"Select person count\"\n        optionFilterProp=\"children\"\n        onChange={onChange}\n        \n        \n        filterOption={(input, option) =>\n        option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n        }\n      >\n        <Option value=\"1\">1</Option>\n        <Option value=\"2\">2</Option>\n        <Option value=\"4\">4</Option>\n    </Select><br/>\n    <Button type=\"primary\" style={ButtonStyle} onClick={ orderFood }>开始点餐</Button>\n    </div>\n\n)\n}\n\n\nexport default withRouter(LandingPage)","import React, { Component, useState} from 'react';\nimport {  Button, Icon, } from 'antd';\nimport api from './api';\n\nimport history from \"./history\"\nimport io from \"socket.io-client\"\n\n\nconst ButtonGroup = Button.Group\n// margin-right怎么写？？？\nconst imgStyle = {\n    float:\"left\",\n    width:\"100px\",\n    height:\"100px\",\n    borderRadius:\"10px\",\n    \n}\n// 圆角边框怎么写\nconst detailStyle = {\n\twidth:\"200px\",\n\tborder:\"1px solid\",\n\tborderRadius:\"8px\",\n\tposition:\"fixed\",\n\tbottom:\"35px\",\n\tleft:\"1px\",\n\tright:\"1px\",\n\tbackgroundColor:\"white\"\n}\nconst cartStyle = {\n    position:\"fixed\",\n    height:\"50px\",\n\t\tbottom:\"1px\",\n\t\tborder:\"1px solid\",\n\t\tborderRadius\n\t\t: \"10px\",\n    left:\"1px\",\n    right:\"1px\",\n    backgroundColor:\"white\"\n}\n\n\nfunction MenuItem ({food,onUpdate,amount}) {\n \n    \n    function dec () {\n\t\t\t// if(amount === 0){\n\t\t\t// \treturn\n\t\t\t// }\n      \n      onUpdate(food,amount - 1)\n    }\n    function inc () {\n      \n\t\t\tonUpdate(food,amount + 1)\n    }\n\n    return (\n    <div> \n     <h3>{food.name}</h3>\n     <img style={ imgStyle } src={\"../upload/\"+ food.img} alt={food.name} />\n     <p>菜品描述{ food.dec }</p>\n     <p>菜品价格{ food.price }</p>\n     <div>\n     <ButtonGroup>\n      <Button onClick={ dec }>-</Button>\n      <Button>{ amount }</Button>\n      <Button onClick={ inc }>+</Button>\n    </ButtonGroup>\n     </div>\n    </div>\n\n )\n}\n\n// 因为上层组件和下层组件都要用到总价，所以抽成一个函数\nfunction calcTotalPrice(cartAry) {\n\n    return cartAry.reduce((total,item) => {\n\t\t\t \n        return total + item.food.price * item.amount\n    },0)\n}\n\nfunction CartDetails(props) {\n\tvar foods = props.foods\n\t\n\treturn(\n  <ul style={detailStyle}>\n\t\t{\n\t\t\tfoods.map(food => {\n\t\t\n\t\t\t\treturn <li key={food.food.id}>\n\t\t\t\t\t菜品名称：{food.food.name} <br/>\n\t\t\t\t\t菜品价格：{food.food.price}\n\t\t\t\t</li>\n\t\t\t})\n\t\t}\n\t</ul>\n\t\t\n\t\n\t)\n}\n\n\n\nfunction CartStatus (props) {\n var [expend,setExpend] = useState(true)\n\n var totalPrice = calcTotalPrice(props.foods)\n\n   return (\n    <div>\n\t   {expend === true ? <CartDetails foods={props.foods}/>:\"\"}\n     <div style={cartStyle}>\n        \n        <Icon type=\"shopping-cart\"  style={{ fontSize: '30px',margin:\"5px\"}}/>\n        {expend ?\n         <Button type=\"primary\" style={{margin:\"5px\"}} size=\"small\"\n         onClick = {()=> {setExpend(false)}}\n         >查看详情\n         </Button> :\n         <Button type=\"primary\" style={{margin:\"5px\"}} size=\"small\"\n         onClick = {()=> {setExpend(true)}}\n         >收起</Button>\n        }\n        \n         <Button type=\"primary\" style={{margin:\"15px\"}} size=\"small\"\n         onClick={() => { props.OnplaceOrder() }}>下单</Button>\n         <strong style={{margin:\"10px\"}}>总价：{ totalPrice }</strong>\n     </div>\n  </div>\n )\n}\n\n// 为什么这个函数不能包裹在FoodCart里面？？？\n// var fetcher = createfetcher (()=>{\n//     return api.get(\"/menu/restaurant/1\")\n// })\n\nexport default class FoodCart extends Component{\n    constructor(props) {\n\t\t\tsuper(props)\n\t\t\tthis.state={\n\t\t\t\tcart:[],\n\t\t\t\tfoodMenu:[],\n\t\t\t\tdeskInfo:{},\n\t\t    loading:false,\n\t\t\t}\n\t\t}\n\t\tcomponentWillUnmount() {\n\t\t\tthis.socket.close()\n\t\t}\n       componentDidMount() {\n\t\n\t\tvar params = this.props.match.params\n\n\t\tapi.get(\"/deskinfo?did=\" + params.did).then((res) => {\n\t\t\tthis.setState({\n\t\t\t\tdeskInfo:res.data,\n\t\t\t})\n\t\t})\n\n\t\tapi.get(\"/menu/restaurant/\"+params.rid).then(res => {\n\t\n\t\t\tthis.setState({\n\t\t\t\tfoodMenu: res.data,\n\t\t\t})\n\t\t})\n\n\t\tthis.socket = io()\n\t\tthis.socket.on(\"connect\",()=>{\n\t\t // 连接成功后告诉后端要加入哪个房间\n\t\t\n\t\tthis.socket.emit(\"join desk\",\"desk:\" + params.did)\n\t\t})\n\t\t\n\t\t// 后端发回已经点过的菜单\n\t\tthis.socket.on(\"cart food\",info => {\n\t\n            this.setState({\n\t\t\t\tcart:[...this.state.cart,...info]\n\t\t\t})\n\t\t})\n\t\t// 当后端订单改变的时候发送消息，前端把消息传到changeCount函数中，从而改变订单状态\n\t\t// 来自同桌的新增菜单\n    this.socket.on(\"new food\",info => {\n\t\t\t\n\t\t\tthis.changeCount(info.food,info.amount)\n\t\t})\n\n\t\tthis.socket.on(\"order success\",order => {\n\t\t\thistory.push({\n\t\t\t\tpathname: `/r/${params.rid}/d/${params.did}/order-success`,\n\t\t\t\tstate: order\n\t\t})\n\t\t})\n\n\t}\n\t\n // 当购物车改变的时候实时发送回后端\n\tcartChange= (food,amount) => {\n\t\n\t\t  var params = this.props.match.params\n\t\t\tthis.socket.emit(\"new food\",{desk:\"desk:\"+params.did,food,amount})\n\t\t\t\n\t}\n\n\t\n\tplaceOrder= () =>{\n\t\tvar params = this.props.match.params\n\t\tapi.post(`/restaurant/${params.rid}/desk/${params.did}/order`,{\n\t\t\tfoods:this.state.cart,\n\t\t\tdeskName: this.state.deskInfo.name,\n\t\t\ttotalPrice:calcTotalPrice(this.state.cart),\n\t\t\tcount:params.count,\n\t}).then((res) => {\n\t\t\thistory.push({\n\t\t\t\t\tpathname: `/r/${params.rid}/d/${params.did}/order-success`,\n\t\t\t\t\tstate: res.data,\n\t\t\t})\n\t\t\t\n\t})\n}\n\nchangeCount=(food,amount) =>{\n     \n\tvar idx = this.state.cart.findIndex(it => it.food.id === food.id)\n\tif(idx >= 0) {\n\t\tif(amount === 0) {\n\t\t    this.setState({\n\t\t\t\t\tcart: [\n\t\t\t\t\t\t...this.state.cart.slice(0,idx),\n\t\t\t\t\t\t...this.state.cart.slice(idx + 1) \n\t\t\t\t ]\n\t\t\t\t})\n\t\t} else {\n\t\t\t this.setState({\n\t\t\t\t cart: [\n\t\t\t\t ...this.state.cart.slice(0,idx),\n\t\t\t\t { food,\n\t\t\t\t\t\t amount,\n\t\t\t\t },\n\t\t\t\t ...this.state.cart.slice(idx+1)\n\t\t\t \n\t\t ]\n\t\t\t })\n }\n\t} else {\n\t this.setState({\n    cart:[\n\t\t\t...this.state.cart,\n\t\t\t{food,\n\t\t\t amount:amount\n\t\t\t}\n\t  ]\n\t })\n\t \n\t}\n\t\n}\n\n  render() {\n\t\n\t\t\n\t\t\treturn(\n\t\t\t\t<div>\n\t\t\t\t\n\t\t\t\t   <div>\n\t\t\t\t\t\t<h2>开始点餐</h2>\n\t\t\t\t\t\t<div>\t\n\t\t\t\t\t\t\t{this.state.foodMenu.map(food => {\n\t\t\t\t\t\t\t\tvar currentAmount = 0\n\t\t\t\t\t\t  \n\t\t\t\t\t\t\t\tvar currentCartItem = this.state.cart.find(cartItem => \n\t\t\t\t\t\t\t\tcartItem.food.id === food.id\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\tif(currentCartItem) {\n\t\t\t\t\t\t\t\tcurrentAmount = currentCartItem.amount\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn  <MenuItem key={food.id} food ={food} \n\t\t\t\t\t\t\tonUpdate= {this.cartChange} amount={currentAmount}\n\t\t\t\t\t\t\t></MenuItem>\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n               \n\t\t\t\t\t\t<CartStatus \n\t\t\t\t\t  \t foods={this.state.cart} \n\t\t\t\t\t  \t onUpdate= {this.cartChange} \n\t\t\t\t\t\t   OnplaceOrder={this.placeOrder } /> \n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t)\n\t\t\n\n\t\t\t// console.log(\"this.state.foodMenu\",this.state.foodMenu)\n\t\t\t// console.log(\"this.state.cart\",this.state.cart)\n      // return(\n\t\t\t// \t<div>\n\t\t\t\t\n\t\t\t// \t   <div>\n\t\t\t// \t\t\t<h2>开始点餐</h2>\n\t\t\t// \t\t\t<div>\t\n\n\t\t\t// \t\t\t\t\t{this.state.foodMenu\n\t\t\t// \t\t\t\t\t.map(food => {\n\t\t\t// \t\t\t\t\t var currentAmount = 0\n\t\t\t\t\t\t\t\n      //            var currentCartItem = this.state.cart.find(cartItem => \n\t\t\t// \t\t\t\t\t\tcartItem.food.id === food.id\n\t\t\t// \t\t\t\t\t )\n      //           if(currentCartItem) {\n\t\t\t// \t\t\t\t\t\tcurrentAmount = currentCartItem.amount\n\t\t\t// \t\t\t\t\t}\n\t\t\t// \t\t\t\t\treturn  <MenuItem key={food.id} food ={food} \n\t\t\t// \t\t\t\t\tonUpdate= {this.cartChange} amount={currentAmount}\n\t\t\t// \t\t\t\t\t></MenuItem>\n\t\t\t// \t\t\t\t\t})}\n\t\t\t// \t\t\t</div>\n               \n\t\t\t// \t\t\t<CartStatus foods={this.state.cart} onUpdate= {this.cartChange} OnplaceOrder={\n\t\t\t// \t\t\t\tthis.placeOrder } /> \n\t\t\t// \t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t// \t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t// )\n\t\t\t\t\t\t\n    }\n}\n\n\n\n/*\nfunction FoodCart () {\n    var params = useParams()\n    \n    var [deskInfo,setdeskInfo] = useState()\n    useEffect(() => {\n        api.get(\"/deskinfo?did=\" + params.did).then((res) => {\n          setdeskInfo(res.data)\n        })\n    },[])\n    var foods = fetcher.read().data\n    // 用来储存用户点了什么菜，点了多少份\n    \n    var [cart,setCart] = useState([])\n    console.log(cart)\n    function changeCount(food,amount) {\n     \n      var idx = cart.findIndex(it => it.food.id === food.id)\n      if(idx >= 0) {\n        if(amount === 0) {\n        \n            setCart([\n               ...cart.slice(0,idx),\n               ...cart.slice(idx + 1) \n            ])\n        } else {\n            setCart([\n            ...cart.slice(0,idx),\n            { food,\n                amount,\n            },\n            ...cart.slice(idx+1)\n          \n        ])\n     }\n      } else {\n      \n       setCart([\n           ...cart,\n           {food,\n            amount:amount\n           }\n       ])\n      }\n      \n    }\n    // 需要发送的内容\n    //   var rid = req.params.rid\n    //   var did = req.params.did\n    //   var customCount = req.body.count\n    //   var deskName = req.body.deskName\n    //   var menuDetails = JSON.stringify(req.body.foods)\n    //   var status= \"pending\" //condirmed/completed\n    //   var totalPrice = req.body.totalPrice\n    //   var timestamp = new Date().toISOString()\n    function placeOrder() {\n        api.post(`/restaurant/${params.rid}/desk/${params.did}/order`,{\n            foods:cart,\n          deskName: deskInfo.name,\n          totalPrice:calcTotalPrice(cart),\n          count:params.count,\n      }).then((res) => {\n          history.push({\n              pathname: `/r/${params.rid}/d/${params.did}/order-success`,\n              state: res.data,\n          })\n          \n      })\n    }\n    // 为什么App.js里面要写上history={},下层组件才可以接收到state???\n    return(\n        <div>\n            <h2>开始点餐</h2>\n            <div>\n                \n                {foods.map(food => {\n                  return  <MenuItem key={food.id} food ={food} \n                  changeCount={ changeCount }\n                 ></MenuItem>\n                })}\n            </div>\n           \n           <CartStatus foods={cart} onUpdate= {changeCount} OnplaceOrder={\n              placeOrder \n           } /> \n         \n        </div>\n    )\n}\n*/\n\n \n                   \n   ","import React from \"react\"\nimport { Card } from 'antd'\nfunction OrderSuccess(props) {\nconsole.log(props)\n    return (\n        <div>\n          <div style={{ background: '#ECECEC', padding: '30px' }}>\n          <Card title=\"下单成功\" bordered={false} style={{ width: 300 }}>\n            \n            <h2>总价：{props.location.state && props.location.state.totalPrice}</h2>\n        </Card>\n  </div>\n\n\n            \n            \n        </div>\n    )\n}\n\n\nexport default OrderSuccess","import { Form, Icon, Input, Button } from 'antd';\nimport React from 'react';\nimport api from './api';\nfunction hasErrors(fieldsError) {\n  return Object.keys(fieldsError).some(field => fieldsError[field]);\n}\n\nclass HorizontalLoginForm extends React.Component {\n  constructor(props) {\n    super(props)\n    \n  }\n  componentDidMount() {\n    // To disabled submit button at the beginning.\n    this.props.form.validateFields();\n  }\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        console.log('Received values of form: ', values)\n        \n        api.post(\"/register\",values).then((res)=> {\n          console.log(\"res\",res.data)\n          if(res.data.code === 0){\n      \n            this.props.history.push(`/login`)\n           \n          }else{\n            alert(\"用户名已存在\")\n          }\n        })\n      }\n    });\n  };\n\n  render() {\n    const { getFieldDecorator, getFieldsError, getFieldError, isFieldTouched } = this.props.form;\n\n    // Only show error after a field is touched.\n    const usernameError = isFieldTouched('username') && getFieldError('username');\n    const passwordError = isFieldTouched('password') && getFieldError('password');\n    return (\n      <Form layout=\"inline\" onSubmit={this.handleSubmit}>\n        <Form.Item validateStatus={usernameError ? 'error' : ''} help={usernameError || ''}>\n          {getFieldDecorator('name', {\n            rules: [{ required: true, message: 'Please input your username!' }],\n          })(\n            <Input\n              prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n              placeholder=\"Username\"\n            />,\n          )}\n        </Form.Item><br/>\n        <Form.Item validateStatus={passwordError ? 'error' : ''} help={passwordError || ''}>\n          {getFieldDecorator('password', {\n            rules: [{ required: true, message: 'Please input your Password!' }],\n          })(\n            <Input\n              prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n              type=\"password\"\n              placeholder=\"Password\"\n            />,\n          )}\n        </Form.Item><br/>\n        <Form.Item validateStatus={passwordError ? 'error' : ''} help={passwordError || ''}>\n          {getFieldDecorator('title', {\n            rules: [{ required: true, message: 'Please input your Password!' }],\n          })(\n            <Input\n              prefix={<Icon type=\"font-size\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n              type=\"text\"\n              placeholder=\"Title\"\n            />,\n          )}\n        </Form.Item><br/>\n        <Form.Item validateStatus={passwordError ? 'error' : ''} help={passwordError || ''}>\n          {getFieldDecorator('email', {\n            rules: [{ required: true, message: 'Please input your Email!' }],\n          })(\n            <Input\n              prefix={<Icon type=\"mail\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n              type=\"email\"\n              placeholder=\"Email\"\n            />,\n          )}\n        </Form.Item><br/>\n        <Form.Item>\n          <Button type=\"primary\" htmlType=\"submit\" disabled={hasErrors(getFieldsError())}>\n            注册\n          </Button>\n        </Form.Item>\n      </Form>\n    );\n  }\n}\n\nconst Register = Form.create({ name: 'horizontal_login' })(HorizontalLoginForm);\n\nexport default Register","import React from 'react';\n\nimport './App.css';\nimport {Router,Route,Switch} from \"react-router-dom\"\n// import { hashHistory } from 'react-router'\n\n//用餐者和管理者使用同一个前端页面\n\n//用餐者 扫码进入,并选择人数/landing/restaurant/35/desk/20\n//       点餐页面 /restaurant/35/desk/20\n//       点餐成功页面\n\n//管理者 \n//登录\n//订单管理：manage/order  订单详情页面manage/order/35\n//菜品管理：manage/food\n//桌面管理：manage/desk\n\nimport HomePage from \"./HomePage\"\nimport Login from \"./Login\"\nimport Manage from \"./boss-manage\"\nimport LandingPage from \"./LandingPage\"\nimport FoodCart from './FoodCart'\nimport OrderSuccess from \"./OrderSuccess\"\nimport history from './history'\nimport Register from './Register'\n \n\nfunction App() {\n  return (\n    <Router history={history}>\n      <Switch>\n        \n        <Route path=\"/\" component={ HomePage } exact/> \n        <Route path=\"/landing/r/:rid/d/:did\" component={LandingPage} />\n        <Route path=\"/r/:rid/d/:did/c/:count\" component={FoodCart} />\n        {/* 点餐成功后跳转的页面 */}\n        <Route path=\"/r/:rid/d/:did/order-success\" component={OrderSuccess} />\n        \n        <Route path=\"/restaurant/:rid/manage/\" component={ Manage }/>\n        <Route path=\"/login\" component={ Login } />\n        <Route path=\"/register\" component={ Register }/>\n      </Switch>\n    </Router>\n  )\n}\n\n\n\nexport default App;\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}